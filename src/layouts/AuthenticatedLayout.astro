---
import Layout from "./Layout.astro";
import { GlobalNavigation } from "@/components/navigation/GlobalNavigation";

interface Props {
  title?: string;
}

const { title = "HealthyMeal" } = Astro.props;

// Extract user email from session (middleware ensures user exists for protected routes)
const userEmail = Astro.locals.user?.email ?? "";

// Get current path for active link highlighting
const currentPath = Astro.url.pathname;
---

<Layout title={title}>
  <!-- Global Navigation -->
  <GlobalNavigation client:load userEmail={userEmail} currentPath={currentPath} />

  <!-- Main content area -->
  <main id="main-content" class="min-h-screen bg-background">
    <slot />
  </main>
</Layout>
